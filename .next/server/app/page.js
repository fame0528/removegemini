(()=>{var a={};a.id=974,a.ids=[974],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},850:(a,b,c)=>{Promise.resolve().then(c.bind(c,6237))},967:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(5338),e=c(9747);function f(){return(0,d.jsx)(e.default,{})}},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},1055:()=>{},1098:(a,b,c)=>{Promise.resolve().then(c.bind(c,9747))},1135:()=>{},1472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(5338),e=c(8039),f=c.n(e);c(1135);let g={title:"RemoveGemini.com - Free AI Watermark Removal Tool",description:"Remove Gemini AI watermarks instantly. 100% free, private, and lossless. Browser-based watermark removal with no uploads. Remove watermarks from Google Gemini generated images.",keywords:"remove gemini watermark, gemini watermark remover, AI watermark removal, free watermark remover, removegemini.com, google gemini watermark, remove ai watermark",authors:[{name:"RemoveGemini.com"}],creator:"RemoveGemini.com",publisher:"RemoveGemini.com",applicationName:"RemoveGemini.com",metadataBase:new URL("https://removegemini.com"),alternates:{canonical:"/"},openGraph:{type:"website",locale:"en_US",url:"https://removegemini.com",siteName:"RemoveGemini.com",title:"RemoveGemini.com - Free AI Watermark Removal Tool",description:"Remove Gemini AI watermarks instantly. 100% free, private, and lossless. Browser-based watermark removal with no uploads.",images:[{url:"/branding/logo-full.png",width:1200,height:630,alt:"RemoveGemini.com - Free AI Watermark Removal Tool"}]},twitter:{card:"summary_large_image",title:"RemoveGemini.com - Free AI Watermark Removal Tool",description:"Remove Gemini AI watermarks instantly. 100% free, private, and lossless.",images:["/branding/logo-full.png"]},icons:{icon:[{url:"/favicon.ico"},{url:"/favicon/icon-192.png",sizes:"192x192",type:"image/png"},{url:"/favicon/icon-512.png",sizes:"512x512",type:"image/png"}],apple:[{url:"/apple-touch-icon.png"}]},manifest:"/manifest.json",robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},verification:{google:""}};function h({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().className} antialiased`,children:a})})}},2638:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(9754),e=c(9117),f=c(6595),g=c(2324),h=c(9326),i=c(8928),j=c(175),k=c(12),l=c(4290),m=c(2696),n=c(2802),o=c(7533),p=c(5229),q=c(2822),r=c(261),s=c(6453),t=c(2474),u=c(6713),v=c(1356),w=c(2685),x=c(6225),y=c(3446),z=c(2762),A=c(5742),B=c(6439),C=c(1170),D=c.n(C),E=c(2506),F=c(1203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,967)),"C:\\dev\\removegemini\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,1472)),"C:\\dev\\removegemini\\src\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,1170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,7028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,2768,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["C:\\dev\\removegemini\\src\\app\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(9902).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6237:(a,b,c)=>{"use strict";c.d(b,{default:()=>bo});var d=c(1124),e=c(8301);let f={"en-US":JSON.parse('{"title":"Gemini Watermark Remover - Lossless Watermark Removal Tool","header.title":"Gemini Watermark Remover","nav.userscript":"Install Userscript for Gemini","nav.principle":"How It Works?","main.title":"Gemini AI Watermark Removal","main.subtitle":"Based on reverse alpha blending algorithm, pure browser-side processing, Free, Fast, and Lossless","upload.text":"Click to select or drag images here","upload.hint":"Supports JPG, PNG, WebP","step.1":"Select Original Image","step.2":"Auto Processing","step.3":"Save Clean Image","preview.original":"Original Preview","preview.result":"Processed Result","panel.title":"Control Panel","btn.download":"Download","btn.reset":"Reset / Change Image","btn.removeAll":"Remove All Watermarks","btn.cancelBatch":"Cancel","progress.text":"Progress","btn.downloadAll":"Download All","batch.processing":"Processing {{current}} of {{total}}...","batch.complete":"Completed {{success}} of {{total}} images","batch.cancelled":"Batch processing cancelled","batch.pending":"{{pending}} images pending","batch.failed":"{{failed}} images failed","batch.stats":"{{success}} success, {{failed}} failed","feature.title":"Features","feature.speed.title":"Lightning Fast","feature.speed.desc":"Based on modern browser technologies, millisecond response, no waiting queue","feature.privacy.title":"Privacy First","feature.privacy.desc":"Pure frontend processing, images never leave your device","feature.free.title":"Completely Free","feature.free.desc":"No usage limits, no hidden fees, ready to use","footer.desc":"Gemini Watermark Remover, for educational purposes only","footer.links":"Links","footer.terms":"Terms of Use","footer.github":"GitHub","footer.tech":"Technology","footer.copyright":"\xa9 {{year}} RemoveGemini.com. All rights reserved.","loading.text":"Processing...","status.loading":"Loading resources...","status.pending":"Pending...","status.processing":"Processing...","status.success":"Completed","status.failed":"Failed","info.size":"Size","info.watermark":"Detected Watermark","info.position":"Position","info.status":"Status","info.removed":"Watermark Removed","original.not_gemini":"⚠️ This image may not be made with Gemini. Lossless processing unavailable.","original.not_original":"⚠️ This image may not be original size. Lossless processing unavailable.","original.pass":"✅ This image made with Gemini. Lossless processing supported."}'),"zh-CN":JSON.parse('{"title":"Gemini Watermark Remover - Gemini 无损去水印工具","header.title":"Gemini Watermark Remover","nav.userscript":"安装油猴脚本","nav.principle":"去水印原理","main.title":"Gemini AI 图像去水印","main.subtitle":"基于反向 Alpha 混合算法，纯浏览器本地处理，免费、极速、无损","upload.text":"点击选择 或 拖拽图片至此","upload.hint":"支持 JPG, PNG, WebP","step.1":"选择原始图片","step.2":"算法自动解析","step.3":"保存无水印图","preview.original":"原图预览","preview.result":"处理结果","panel.title":"操作面板","btn.download":"下载结果","btn.reset":"重置 / 更换图片","btn.removeAll":"移除全部水印","btn.cancelBatch":"取消","progress.text":"进度","btn.downloadAll":"全部下载","batch.processing":"正在处理 {{current}} / {{total}}...","batch.complete":"已完成 {{success}} / {{total}} 张图片","batch.cancelled":"批量处理已取消","batch.pending":"{{pending}} 张待处理","batch.failed":"{{failed}} 张失败","batch.stats":"{{success}} 成功, {{failed}} 失败","feature.title":"功能特点","feature.speed.title":"极速处理","feature.speed.desc":"基于现代浏览器技术加速处理，毫秒级响应，无需等待排队","feature.privacy.title":"隐私安全","feature.privacy.desc":"浏览器前端本地运行，图片数据不会离开您的设备，绝不会上传服务器","feature.free.title":"完全免费","feature.free.desc":"无次数限制，无隐藏付费，即开即用","footer.desc":"Gemini 无损去水印工具，本工具仅供学习交流使用","footer.links":"链接","footer.terms":"使用条款","footer.github":"GitHub","footer.tech":"技术","footer.copyright":"\xa9 {{year}} RemoveGemini.com. All rights reserved.","loading.text":"正在处理...","status.loading":"正在加载资源...","status.pending":"等待处理...","status.processing":"处理中...","status.success":"处理完成","status.failed":"处理失败","info.size":"尺寸","info.watermark":"检测到的水印","info.position":"位置","info.status":"状态","info.removed":"水印已移除","original.not_gemini":"⚠️ 此图片非 Gemini 生成的原始图片，可能无法进行无损去水印","original.not_original":"⚠️ 此图片非原始尺寸，可能无法进行无损去水印","original.pass":"✅ 此图片为 Gemini 生成的原始图片，可进行无损去水印"}')},g=function(a){let b=function(){let a=navigator.language;return"zh-CN"===a||"zh"===a?"zh-CN":"en-US"}(),c=[];return{t:function(a,c){let d=f[b][a]||a;return c&&Object.entries(c).forEach(([a,b])=>{d=d.replace(RegExp(`{{${a}}}`,"g"),String(b))}),d},setLocale:function(a){b!==a&&(b=a,c.forEach(b=>b(a)))},getLocale:function(){return b},onChange:function(a){return c.push(a),()=>{let b=c.indexOf(a);-1!==b&&c.splice(b,1)}}}}();function h(){let[a,b]=(0,e.useState)(g.getLocale()),[c,f]=(0,e.useState)(g.t("header.title"));return(0,d.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50 glass shadow-2xl",children:(0,d.jsx)("div",{className:"container mx-auto px-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,d.jsxs)("a",{href:"/",className:"flex items-center space-x-3 group",children:[(0,d.jsxs)("div",{className:"relative w-12 h-12 transition-transform group-hover:scale-105",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl blur opacity-75 animate-glow"}),(0,d.jsx)("img",{src:"/branding/logo-icon.png",alt:"RemoveGemini Logo",className:"relative w-full h-full object-contain"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold gradient-text",children:"RemoveGemini"}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:".com"})]})]}),(0,d.jsxs)("button",{onClick:()=>{g.setLocale("en-US"===a?"zh-CN":"en-US")},className:"group relative flex items-center space-x-2 px-5 py-2.5 rounded-xl glass-light hover:scale-105 transition-all duration-300 btn-shine","aria-label":"Toggle language",children:[(0,d.jsx)("svg",{className:"w-5 h-5 text-blue-400 group-hover:text-blue-300 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),(0,d.jsx)("span",{className:"text-sm font-semibold text-white",children:"en-US"===a?"EN":"中文"})]})]})})})}function i(){let[a,b]=(0,e.useState)(g.t("footer.desc")),[c,f]=(0,e.useState)(g.t("footer.copyright",{year:new Date().getFullYear().toString()}));return(0,d.jsx)("footer",{className:"glass border-t border-gray-700/50 mt-20",children:(0,d.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-xl font-bold gradient-text mb-4",children:"RemoveGemini.com"}),(0,d.jsx)("p",{className:"text-sm text-gray-400 leading-relaxed",children:a})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-white mb-3",children:g.t("footer.links")}),(0,d.jsxs)("ul",{className:"space-y-2",children:[(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:"https://github.com/fame0528/removegemini",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:text-blue-300 hover:underline",children:g.t("footer.github")})}),(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:"/terms",className:"text-sm text-blue-400 hover:text-blue-300 hover:underline",children:g.t("footer.terms")})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-white mb-3",children:g.t("footer.tech")}),(0,d.jsxs)("ul",{className:"space-y-2 text-sm text-gray-400",children:[(0,d.jsxs)("li",{children:["✅ ",g.t("feature.privacy.title")]}),(0,d.jsxs)("li",{children:["⚡ ",g.t("feature.speed.title")]}),(0,d.jsxs)("li",{children:["\uD83C\uDD93 ",g.t("feature.free.title")]})]})]})]}),(0,d.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-700",children:(0,d.jsx)("p",{className:"text-sm text-center text-gray-500",children:c})})]})})}function j({onFilesSelected:a,disabled:b=!1}){let[c,f]=(0,e.useState)(!1),h=(0,e.useRef)(null);return(0,d.jsxs)("div",{className:`
        relative border-2 border-dashed rounded-3xl p-16
        transition-all duration-300 cursor-pointer
        ${c?"border-blue-500 glass-light scale-105 shadow-2xl shadow-blue-500/30":b?"border-gray-700 glass cursor-not-allowed opacity-50":"border-gray-600 glass hover:border-blue-400 hover:scale-102 hover:shadow-xl card-hover"}
      `,onDragEnter:a=>{a.preventDefault(),a.stopPropagation(),b||f(!0)},onDragLeave:a=>{a.preventDefault(),a.stopPropagation(),f(!1)},onDragOver:a=>{a.preventDefault(),a.stopPropagation()},onDrop:c=>{if(c.preventDefault(),c.stopPropagation(),f(!1),b)return;let d=c.dataTransfer.files;d.length>0&&a(d)},onClick:()=>{!b&&h.current&&h.current.click()},children:[(0,d.jsx)("input",{ref:h,type:"file",accept:"image/*",multiple:!0,onChange:b=>{let c=b.target.files;c&&c.length>0&&a(c),b.target.value=""},className:"hidden",disabled:b}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,d.jsxs)("div",{className:"relative mb-8",children:[(0,d.jsx)("div",{className:`absolute inset-0 rounded-full blur-2xl transition-all ${c?"bg-blue-500 opacity-60":"bg-blue-500 opacity-30"}`}),(0,d.jsx)("div",{className:`
              relative w-20 h-20 rounded-full flex items-center justify-center transition-all
              ${c?"bg-gradient-to-br from-blue-500 to-purple-600 scale-110":"bg-gradient-to-br from-gray-700 to-gray-800"}
            `,children:(0,d.jsx)("svg",{className:`w-10 h-10 transition-colors ${c?"text-white":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})]}),(0,d.jsxs)("div",{className:"text-center mb-10",children:[(0,d.jsx)("p",{className:"text-2xl font-bold text-white mb-2",children:g.t("upload.text")}),(0,d.jsx)("p",{className:"text-base text-gray-400",children:g.t("upload.hint")})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-6 mt-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-bold",children:"1"}),(0,d.jsx)("span",{className:"text-sm text-gray-300",children:g.t("step.1")})]}),(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-bold",children:"2"}),(0,d.jsx)("span",{className:"text-sm text-gray-300",children:g.t("step.2")})]}),(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-bold",children:"3"}),(0,d.jsx)("span",{className:"text-sm text-gray-300",children:g.t("step.3")})]})]})]})]})}function k({item:a,onRemoveWatermark:b,onDownload:c}){let f,h,i=(0,e.useRef)(null),j=(0,e.useRef)(null);return(0,e.useRef)(null),(0,e.useRef)(null),a.isOriginal?g.t("original.pass"):g.t("original.not_original"),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsx)("div",{className:"group glass rounded-xl overflow-hidden card-hover",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("img",{ref:i,src:a.originalUrl||"",alt:"Original",className:"w-full h-auto max-h-[70vh] object-contain cursor-zoom-in"}),(0,d.jsx)("div",{className:"absolute top-3 left-3 px-2.5 py-1 rounded-lg glass-light",children:(0,d.jsx)("span",{className:"text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Original"})})]})}),(0,d.jsx)("div",{className:"group glass rounded-xl overflow-hidden card-hover",children:(0,d.jsx)("div",{className:"relative min-h-[200px]",children:a.processedUrl?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{ref:j,src:a.processedUrl,alt:"Processed",className:"w-full h-auto max-h-[70vh] object-contain cursor-zoom-in"}),(0,d.jsx)("div",{className:"absolute top-3 left-3 px-2.5 py-1 rounded-lg bg-gradient-to-r from-green-500/30 to-blue-500/30 backdrop-blur-md border border-green-500/50",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,d.jsx)("span",{className:"text-xs font-bold text-green-300 uppercase tracking-wider",children:"Watermark Removed"})]})})]}):(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[200px] sm:min-h-[300px] bg-gradient-to-br from-gray-900/50 to-gray-800/50",children:(0,d.jsx)("div",{className:"text-center",children:"processing"===a.status?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-sm text-gray-400",children:"Processing..."})]}):(0,d.jsx)("button",{onClick:b,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-semibold rounded-xl transition-all duration-300 btn-shine",children:"Remove Watermark"})})})})})]}),(0,d.jsx)("div",{className:"glass-light rounded-xl p-3",children:(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,d.jsx)("span",{className:"text-sm text-gray-400",children:(f=a.originalImage.width,h=a.originalImage.height,`${f} \xd7 ${h}`)})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),(0,d.jsxs)("span",{className:"text-sm text-gray-400",children:["Watermark: ",a.watermarkInfo.size,"\xd7",a.watermarkInfo.size]})]}),a.isOriginal&&(0,d.jsxs)("div",{className:"flex items-center space-x-1.5 px-2 py-1 rounded-md bg-green-500/10",children:[(0,d.jsx)("svg",{className:"w-3.5 h-3.5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,d.jsx)("span",{className:"text-xs font-medium text-green-400",children:"Original"})]})]}),a.processedUrl&&(0,d.jsx)("button",{onClick:c,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white text-sm font-semibold rounded-lg transition-all duration-300 btn-shine shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,d.jsx)("span",{children:"Download"})]})})]})})]})}function l({state:a,progress:b,onCancel:c}){let[f,h]=(0,e.useState)(""),[i,j]=(0,e.useState)("");return"idle"===a||0===b.total?null:(0,d.jsxs)("div",{className:"mb-6 glass rounded-xl p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-white mb-1",children:g.t("progress.text")}),(0,d.jsx)("p",{className:"text-sm text-gray-400",children:f})]}),"processing"===a&&c&&(0,d.jsx)("button",{onClick:c,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 font-semibold rounded-lg transition-all duration-200 border border-red-500/30",children:g.t("btn.cancelBatch")})]}),(0,d.jsxs)("div",{className:"relative w-full h-3 bg-gray-700/50 rounded-full overflow-hidden mb-3",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20",style:{width:`${b.percentage}%`,transition:"width 0.3s ease"}}),(0,d.jsx)("div",{className:"relative h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-300 ease-out",style:{width:`${b.percentage}%`},children:"processing"===a&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-400",children:i}),(0,d.jsxs)("span",{className:"font-bold text-white",children:[b.percentage,"%"]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-4 gap-3 mt-4",children:[(0,d.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-700/30",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:b.total}),(0,d.jsx)("div",{className:"text-xs text-gray-400",children:"Total"})]}),(0,d.jsxs)("div",{className:"text-center p-2 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:b.pending}),(0,d.jsx)("div",{className:"text-xs text-yellow-400/80",children:"Pending"})]}),(0,d.jsxs)("div",{className:"text-center p-2 rounded-lg bg-green-500/10 border border-green-500/20",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-400",children:b.success}),(0,d.jsx)("div",{className:"text-xs text-green-400/80",children:"Success"})]}),(0,d.jsxs)("div",{className:"text-center p-2 rounded-lg bg-red-500/10 border border-red-500/20",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-red-400",children:b.failed}),(0,d.jsx)("div",{className:"text-xs text-red-400/80",children:"Failed"})]})]})]})}Object.assign,!function(a,b){void 0===b&&(b={});var c=b.insertAt;if(a&&"undefined"!=typeof document){var d=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css","top"===c&&d.firstChild?d.insertBefore(e,d.firstChild):d.appendChild(e),e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}");var m="undefined"!=typeof self?self:global;let n="undefined"!=typeof navigator,o=n&&"undefined"==typeof HTMLImageElement,p=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),q=m.Buffer,r=m.BigInt,s=!!q,t=a=>a;function u(a,b=t){if(p)try{return"function"==typeof require?Promise.resolve(b(require(a))):import(a).then(b)}catch(b){console.warn(`Couldn't load ${a}`)}}let v=m.fetch;if(!m.fetch){let a=u("http",a=>a),b=u("https",a=>a),c=(d,{headers:e}={})=>new Promise(async(f,g)=>{let{port:h,hostname:i,pathname:j,protocol:k,search:l}=new URL(d),m={method:"GET",hostname:i,path:encodeURI(j)+l,headers:e};""!==h&&(m.port=Number(h));let n=("https:"===k?await b:await a).request(m,a=>{if(301===a.statusCode||302===a.statusCode)return c(new URL(a.headers.location,d).toString(),{headers:e}).then(f).catch(g);f({status:a.statusCode,arrayBuffer:()=>new Promise(b=>{let c=[];a.on("data",a=>c.push(a)),a.on("end",()=>b(Buffer.concat(c)))})})});n.on("error",g),n.end()});v=c}function w(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}let x=a=>z(a)?void 0:a,y=a=>void 0!==a;function z(a){return void 0===a||(a instanceof Map?0===a.size:0===Object.values(a).filter(y).length)}function A(a){let b=Error(a);throw delete b.stack,b}function B(a){return""===(a=(function(a){for(;a.endsWith("\0");)a=a.slice(0,-1);return a})(a).trim())?void 0:a}function C(a){let b,c=(b=0,a.ifd0.enabled&&(b+=1024),a.exif.enabled&&(b+=2048),a.makerNote&&(b+=2048),a.userComment&&(b+=1024),a.gps.enabled&&(b+=512),a.interop.enabled&&(b+=100),a.ifd1.enabled&&(b+=1024),b+2048);return a.jfif.enabled&&(c+=50),a.xmp.enabled&&(c+=2e4),a.iptc.enabled&&(c+=14e3),a.icc.enabled&&(c+=6e3),c}let D=a=>String.fromCharCode.apply(null,a),E="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function F(a){return E?E.decode(a):s?Buffer.from(a).toString("utf8"):decodeURIComponent(escape(D(a)))}class G{static from(a,b){return a instanceof this&&a.le===b?a:new G(a,void 0,void 0,b)}constructor(a,b=0,c,d){if("boolean"==typeof d&&(this.le=d),Array.isArray(a)&&(a=new Uint8Array(a)),0===a)this.byteOffset=0,this.byteLength=0;else if(a instanceof ArrayBuffer){void 0===c&&(c=a.byteLength-b);let d=new DataView(a,b,c);this._swapDataView(d)}else if(a instanceof Uint8Array||a instanceof DataView||a instanceof G){void 0===c&&(c=a.byteLength-b),(b+=a.byteOffset)+c>a.byteOffset+a.byteLength&&A("Creating view outside of available memory in ArrayBuffer");let d=new DataView(a.buffer,b,c);this._swapDataView(d)}else if("number"==typeof a){let b=new DataView(new ArrayBuffer(a));this._swapDataView(b)}else A("Invalid input argument for BufferView: "+a)}_swapArrayBuffer(a){this._swapDataView(new DataView(a))}_swapBuffer(a){this._swapDataView(new DataView(a.buffer,a.byteOffset,a.byteLength))}_swapDataView(a){this.dataView=a,this.buffer=a.buffer,this.byteOffset=a.byteOffset,this.byteLength=a.byteLength}_lengthToEnd(a){return this.byteLength-a}set(a,b,c=G){return a instanceof DataView||a instanceof G?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a instanceof Uint8Array||A("BufferView.set(): Invalid data argument."),this.toUint8().set(a,b),new c(this,b,a.byteLength)}subarray(a,b){return b=b||this._lengthToEnd(a),new G(this,a,b)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(a,b){return new Uint8Array(this.buffer,this.byteOffset+a,b)}getString(a=0,b=this.byteLength){return F(this.getUint8Array(a,b))}getLatin1String(a=0,b=this.byteLength){return D(this.getUint8Array(a,b))}getUnicodeString(a=0,b=this.byteLength){let c=[];for(let d=0;d<b&&a+d<this.byteLength;d+=2)c.push(this.getUint16(a+d));return D(c)}getInt8(a){return this.dataView.getInt8(a)}getUint8(a){return this.dataView.getUint8(a)}getInt16(a,b=this.le){return this.dataView.getInt16(a,b)}getInt32(a,b=this.le){return this.dataView.getInt32(a,b)}getUint16(a,b=this.le){return this.dataView.getUint16(a,b)}getUint32(a,b=this.le){return this.dataView.getUint32(a,b)}getFloat32(a,b=this.le){return this.dataView.getFloat32(a,b)}getFloat64(a,b=this.le){return this.dataView.getFloat64(a,b)}getFloat(a,b=this.le){return this.dataView.getFloat32(a,b)}getDouble(a,b=this.le){return this.dataView.getFloat64(a,b)}getUintBytes(a,b,c){switch(b){case 1:return this.getUint8(a,c);case 2:return this.getUint16(a,c);case 4:return this.getUint32(a,c);case 8:return this.getUint64&&this.getUint64(a,c)}}getUint(a,b,c){switch(b){case 8:return this.getUint8(a,c);case 16:return this.getUint16(a,c);case 32:return this.getUint32(a,c);case 64:return this.getUint64&&this.getUint64(a,c)}}toString(a){return this.dataView.toString(a,this.constructor.name)}ensureChunk(){}}function H(a,b){A(`${a} '${b}' was not loaded, try using full build of exifr.`)}class I extends Map{constructor(a){super(),this.kind=a}get(a,b){var c;return this.has(a)||H(this.kind,a),b&&(a in b||(c=this.kind,A(`Unknown ${c} '${a}'.`)),b[a].enabled||H(this.kind,a)),super.get(a)}keyList(){return Array.from(this.keys())}}var J=new I("file parser"),K=new I("segment parser"),L=new I("file reader");function M(a,b){return a.startsWith("data:")||a.length>1e4?O(a,b,"base64"):p&&a.includes("://")?N(a,b,"url",P):p?O(a,b,"fs"):n?N(a,b,"url",P):void A("Invalid input argument")}async function N(a,b,c,d){return L.has(c)?O(a,b,c):d?async function(a,b){return new G(await b(a))}(a,d):void A(`Parser ${c} is not loaded`)}async function O(a,b,c){let d=new(L.get(c))(a,b);return await d.read(),d}let P=a=>v(a).then(a=>a.arrayBuffer()),Q=a=>new Promise((b,c)=>{let d=new FileReader;d.onloadend=()=>b(d.result||new ArrayBuffer),d.onerror=c,d.readAsArrayBuffer(a)});class R extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function S(a,b,c){let d=new R;for(let[a,b]of c)d.set(a,b);if(Array.isArray(b))for(let c of b)a.set(c,d);else a.set(b,d);return d}function T(a,b,c){let d,e=a.get(b);for(d of c)e.set(d[0],d[1])}let U=new Map,V=new Map,W=new Map,X=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Y=["jfif","xmp","icc","iptc","ihdr"],Z=["tiff",...Y],$=["ifd0","ifd1","exif","gps","interop"],_=[...Z,...$],aa=["makerNote","userComment"],ab=["translateKeys","translateValues","reviveValues","multiSegment"],ac=[...ab,"sanitize","mergeOutput","silentErrors"];class ad{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class ae extends ad{get needed(){return this.enabled||this.deps.size>0}constructor(a,b,c,d){if(super(),w(this,"enabled",!1),w(this,"skip",new Set),w(this,"pick",new Set),w(this,"deps",new Set),w(this,"translateKeys",!1),w(this,"translateValues",!1),w(this,"reviveValues",!1),this.key=a,this.enabled=b,this.parse=this.enabled,this.applyInheritables(d),this.canBeFiltered=$.includes(a),this.canBeFiltered&&(this.dict=U.get(a)),void 0!==c)if(Array.isArray(c))this.parse=this.enabled=!0,this.canBeFiltered&&c.length>0&&this.translateTagSet(c,this.pick);else if("object"==typeof c){if(this.enabled=!0,this.parse=!1!==c.parse,this.canBeFiltered){let{pick:a,skip:b}=c;a&&a.length>0&&this.translateTagSet(a,this.pick),b&&b.length>0&&this.translateTagSet(b,this.skip)}this.applyInheritables(c)}else!0===c||!1===c?this.parse=this.enabled=c:A(`Invalid options argument: ${c}`)}applyInheritables(a){let b,c;for(b of ab)void 0!==(c=a[b])&&(this[b]=c)}translateTagSet(a,b){if(this.dict){let c,d,{tagKeys:e,tagValues:f}=this.dict;for(c of a)"string"==typeof c?(-1===(d=f.indexOf(c))&&(d=e.indexOf(Number(c))),-1!==d&&b.add(Number(e[d]))):b.add(c)}else for(let c of a)b.add(c)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ak(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ak(this.pick,this.deps)}}var af={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},ag=new Map;class ah extends ad{static useCached(a){let b=ag.get(a);return void 0!==b||(b=new this(a),ag.set(a,b)),b}constructor(a){super(),!0===a?this.setupFromTrue():void 0===a?this.setupFromUndefined():Array.isArray(a)?this.setupFromArray(a):"object"==typeof a?this.setupFromObject(a):A(`Invalid options argument ${a}`),void 0===this.firstChunkSize&&(this.firstChunkSize=n?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let a;for(a of X)this[a]=af[a];for(a of ac)this[a]=af[a];for(a of aa)this[a]=af[a];for(a of _)this[a]=new ae(a,af[a],void 0,this)}setupFromTrue(){let a;for(a of X)this[a]=af[a];for(a of ac)this[a]=af[a];for(a of aa)this[a]=!0;for(a of _)this[a]=new ae(a,!0,void 0,this)}setupFromArray(a){let b;for(b of X)this[b]=af[b];for(b of ac)this[b]=af[b];for(b of aa)this[b]=af[b];for(b of _)this[b]=new ae(b,!1,void 0,this);this.setupGlobalFilters(a,void 0,$)}setupFromObject(a){let b;for(b of($.ifd0=$.ifd0||$.image,$.ifd1=$.ifd1||$.thumbnail,Object.assign(this,a),X))this[b]=aj(a[b],af[b]);for(b of ac)this[b]=aj(a[b],af[b]);for(b of aa)this[b]=aj(a[b],af[b]);for(b of Z)this[b]=new ae(b,af[b],a[b],this);for(b of $)this[b]=new ae(b,af[b],a[b],this.tiff);this.setupGlobalFilters(a.pick,a.skip,$,_),!0===a.tiff?this.batchEnableWithBool($,!0):!1===a.tiff?this.batchEnableWithUserValue($,a):Array.isArray(a.tiff)?this.setupGlobalFilters(a.tiff,void 0,$):"object"==typeof a.tiff&&this.setupGlobalFilters(a.tiff.pick,a.tiff.skip,$)}batchEnableWithBool(a,b){for(let c of a)this[c].enabled=b}batchEnableWithUserValue(a,b){for(let c of a){let a=b[c];this[c].enabled=!1!==a&&void 0!==a}}setupGlobalFilters(a,b,c,d=c){if(a&&a.length){for(let a of d)this[a].enabled=!1;for(let[b,d]of ai(a,c))ak(this[b].pick,d),this[b].enabled=!0}else if(b&&b.length)for(let[a,d]of ai(b,c))ak(this[a].skip,d)}filterNestedSegmentTags(){let{ifd0:a,exif:b,xmp:c,iptc:d,icc:e}=this;this.makerNote?b.deps.add(37500):b.skip.add(37500),this.userComment?b.deps.add(37510):b.skip.add(37510),c.enabled||a.skip.add(700),d.enabled||a.skip.add(33723),e.enabled||a.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:a,exif:b,gps:c,interop:d}=this;for(let e of(d.needed&&(b.deps.add(40965),a.deps.add(40965)),b.needed&&a.deps.add(34665),c.needed&&a.deps.add(34853),this.tiff.enabled=$.some(a=>!0===this[a].enabled)||this.makerNote||this.userComment,$))this[e].finalizeFilters()}get onlyTiff(){return!Y.map(a=>this[a].enabled).some(a=>!0===a)&&this.tiff.enabled}checkLoadedPlugins(){for(let a of Z)this[a].enabled&&!K.has(a)&&H("segment parser",a)}}function ai(a,b){let c,d,e,f,g=[];for(e of b){for(f of(c=U.get(e),d=[],c))(a.includes(f[0])||a.includes(f[1]))&&d.push(f[0]);d.length&&g.push([e,d])}return g}function aj(a,b){return void 0!==a?a:void 0!==b?b:void 0}function ak(a,b){for(let c of b)a.add(c)}w(ah,"default",af);class al{constructor(a){w(this,"parsers",{}),w(this,"output",{}),w(this,"errors",[]),w(this,"pushToErrors",a=>this.errors.push(a)),this.options=ah.useCached(a)}async read(a){var b;this.file=await (b=this.options,"string"==typeof a?M(a,b):n&&!o&&a instanceof HTMLImageElement?M(a.src,b):a instanceof Uint8Array||a instanceof ArrayBuffer||a instanceof DataView?new G(a):n&&a instanceof Blob?N(a,b,"blob",Q):void A("Invalid input argument"))}setup(){if(this.fileParser)return;let{file:a}=this,b=a.getUint16(0);for(let[c,d]of J)if(d.canHandle(a,b))return this.fileParser=new d(this.options,this.file,this.parsers),a[c]=!0;this.file.close&&this.file.close(),A("Unknown file format")}async parse(){let{output:a,errors:b}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),b.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&b.length>0&&(a.errors=b),x(a)}async executeParsers(){let{output:a}=this;await this.fileParser.parse();let b=Object.values(this.parsers).map(async b=>{let c=await b.parse();b.assignToOutput(a,c)});this.options.silentErrors&&(b=b.map(a=>a.catch(this.pushToErrors))),await Promise.all(b)}async extractThumbnail(){var a;this.setup();let{options:b,file:c}=this,d=K.get("tiff",b);if(c.tiff?a={start:0,type:"tiff"}:c.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),void 0===a)return;let e=await this.fileParser.ensureSegmentChunk(a),f=this.parsers.tiff=new d(e,b,c),g=await f.extractThumbnail();return c.close&&c.close(),g}}async function am(a,b){let c=new al(b);return await c.read(a),c.parse()}var an=Object.freeze({__proto__:null,parse:am,Exifr:al,fileParsers:J,segmentParsers:K,fileReaders:L,tagKeys:U,tagValues:V,tagRevivers:W,createDictionary:S,extendDictionary:T,fetchUrlAsArrayBuffer:P,readBlobAsArrayBuffer:Q,chunkedProps:X,otherSegments:Y,segments:Z,tiffBlocks:$,segmentsAndBlocks:_,tiffExtractables:aa,inheritables:ab,allFormatters:ac,Options:ah});class ao{constructor(a,b,c){w(this,"errors",[]),w(this,"ensureSegmentChunk",async a=>{let b=a.start,c=a.size||65536;if(this.file.chunked)if(this.file.available(b,c))a.chunk=this.file.subarray(b,c);else try{a.chunk=await this.file.readChunk(b,c)}catch(b){A(`Couldn't read segment: ${JSON.stringify(a)}. ${b.message}`)}else this.file.byteLength>b+c?a.chunk=this.file.subarray(b,c):void 0===a.size?a.chunk=this.file.subarray(b):A("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(a),this.options=a,this.file=b,this.parsers=c}injectSegment(a,b){this.options[a].enabled&&this.createParser(a,b)}createParser(a,b){let c=new(K.get(a))(b,this.options,this.file);return this.parsers[a]=c}createParsers(a){for(let b of a){let{type:a,chunk:c}=b,d=this.options[a];if(d&&d.enabled){let b=this.parsers[a];b&&b.append||b||this.createParser(a,c)}}}async readSegments(a){let b=a.map(this.ensureSegmentChunk);await Promise.all(b)}}class ap{static findPosition(a,b){let c=a.getUint16(b+2)+2,d="function"==typeof this.headerLength?this.headerLength(a,b,c):this.headerLength,e=b+d,f=c-d;return{offset:b,length:c,headerLength:d,start:e,size:f,end:e+f}}static parse(a,b={}){return new this(a,new ah({[this.type]:b}),a).parse()}normalizeInput(a){return a instanceof G?a:new G(a)}constructor(a,b={},c){w(this,"errors",[]),w(this,"raw",new Map),w(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(a),this.file=c,this.type=this.constructor.type,this.globalOptions=this.options=b,this.localOptions=b[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(a,b){let c=W.get(b),d=V.get(b),e=U.get(b),f=this.options[b],g=f.reviveValues&&!!c,h=f.translateValues&&!!d,i=f.translateKeys&&!!e,j={};for(let[b,f]of a)g&&c.has(b)?f=c.get(b)(f):h&&d.has(b)&&(f=this.translateValue(f,d.get(b))),i&&e.has(b)&&(b=e.get(b)||b),j[b]=f;return j}translateValue(a,b){return b[a]||b.DEFAULT||a}assignToOutput(a,b){this.assignObjectToOutput(a,this.constructor.type,b)}assignObjectToOutput(a,b,c){if(this.globalOptions.mergeOutput)return Object.assign(a,c);a[b]?Object.assign(a[b],c):a[b]=c}}w(ap,"headerLength",4),w(ap,"type",void 0),w(ap,"multiSegment",!1),w(ap,"canHandle",()=>!1);class aq extends ao{constructor(...a){super(...a),w(this,"appSegments",[]),w(this,"jpegSegments",[]),w(this,"unknownSegments",[])}static canHandle(a,b){return 65496===b}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(a){!0===a?(this.findAll=!0,this.wanted=new Set(K.keyList())):(a=void 0===a?K.keyList().filter(a=>this.options[a].enabled):a.filter(a=>this.options[a].enabled&&K.has(a)),this.findAll=!1,this.remaining=new Set(a),this.wanted=new Set(a)),this.unfinishedMultiSegment=!1}async findAppSegments(a=0,b){this.setupSegmentFinderArgs(b);let{file:c,findAll:d,wanted:e,remaining:f}=this;if(!d&&this.file.chunked&&(d=Array.from(e).some(a=>{let b=K.get(a),c=this.options[a];return b.multiSegment&&c.multiSegment}))&&await this.file.readWhole(),a=this.findAppSegmentsInRange(a,c.byteLength),!this.options.onlyTiff&&c.chunked){let b=!1;for(;f.size>0&&!b&&(c.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=c,e=this.appSegments.some(a=>!this.file.available(a.offset||a.start,a.length||a.size));if(b=a>d&&!e?!await c.readNextChunk(a):!await c.readNextChunk(d),void 0===(a=this.findAppSegmentsInRange(a,c.byteLength)))return}}}findAppSegmentsInRange(a,b){b-=2;let c,d,e,f,g,h,{file:i,findAll:j,wanted:k,remaining:l,options:m}=this;for(;a<b;a++)if(255===i.getUint8(a)){var n;if((n=c=i.getUint8(a+1))>=224&&n<=239){if(d=i.getUint16(a+2),(e=function(a,b,c){for(let[d,e]of K)if(e.canHandle(a,b,c))return d}(i,a,d))&&k.has(e)&&(g=(f=K.get(e)).findPosition(i,a),h=m[e],g.type=e,this.appSegments.push(g),!j&&(f.multiSegment&&h.multiSegment?(this.unfinishedMultiSegment=g.chunkNumber<g.chunkCount,this.unfinishedMultiSegment||l.delete(e)):l.delete(e),0===l.size)))break;m.recordUnknownSegments&&((g=ap.findPosition(i,a)).marker=c,this.unknownSegments.push(g)),a+=d+1}else if(192===c||194===c||196===c||219===c||221===c||218===c||254===c){if(d=i.getUint16(a+2),218===c&&!1!==m.stopAfterSos)return;m.recordJpegSegments&&this.jpegSegments.push({offset:a,length:d,marker:c}),a+=d+1}}return a}mergeMultiSegments(){if(!this.appSegments.some(a=>a.multiSegment))return;let a=function(a,b){let c,d,e,f=new Map;for(let g=0;g<a.length;g++)d=(c=a[g])[b],f.has(d)?e=f.get(d):f.set(d,e=[]),e.push(c);return Array.from(f)}(this.appSegments,"type");this.mergedAppSegments=a.map(([a,b])=>{let c=K.get(a,this.options);return c.handleMultiSegments?{type:a,chunk:c.handleMultiSegments(b)}:b[0]})}getSegment(a){return this.appSegments.find(b=>b.type===a)}async getOrFindSegment(a){let b=this.getSegment(a);return void 0===b&&(await this.findAppSegments(0,[a]),b=this.getSegment(a)),b}}w(aq,"type","jpeg"),J.set("jpeg",aq);let ar=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class as extends ap{parseHeader(){var a=this.chunk.getUint16();18761===a?this.le=!0:19789===a&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(a,b,c=new Map){let{pick:d,skip:e}=this.options[b],f=(d=new Set(d)).size>0,g=0===e.size,h=this.chunk.getUint16(a);a+=2;for(let i=0;i<h;i++){let h=this.chunk.getUint16(a);if(f){if(d.has(h)&&(c.set(h,this.parseTag(a,h,b)),d.delete(h),0===d.size))break}else!g&&e.has(h)||c.set(h,this.parseTag(a,h,b));a+=12}return c}parseTag(a,b,c){let{chunk:d}=this,e=d.getUint16(a+2),f=d.getUint32(a+4),g=ar[e];if(g*f<=4?a+=8:a=d.getUint32(a+8),(e<1||e>13)&&A(`Invalid TIFF value type. block: ${c.toUpperCase()}, tag: ${b.toString(16)}, type: ${e}, offset ${a}`),a>d.byteLength&&A(`Invalid TIFF value offset. block: ${c.toUpperCase()}, tag: ${b.toString(16)}, type: ${e}, offset ${a} is outside of chunk size ${d.byteLength}`),1===e)return d.getUint8Array(a,f);if(2===e)return B(d.getString(a,f));if(7===e)return d.getUint8Array(a,f);if(1===f)return this.parseTagValue(e,a);{let b=new(function(a){switch(a){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(e))(f);for(let c=0;c<f;c++)b[c]=this.parseTagValue(e,a),a+=g;return b}}parseTagValue(a,b){let{chunk:c}=this;switch(a){case 1:return c.getUint8(b);case 3:return c.getUint16(b);case 4:case 13:return c.getUint32(b);case 5:return c.getUint32(b)/c.getUint32(b+4);case 6:return c.getInt8(b);case 8:return c.getInt16(b);case 9:return c.getInt32(b);case 10:return c.getInt32(b)/c.getInt32(b+4);case 11:return c.getFloat(b);case 12:return c.getDouble(b);default:A(`Invalid tiff type ${a}`)}}}class at extends as{static canHandle(a,b){return 225===a.getUint8(b+1)&&0x45786966===a.getUint32(b+4)&&0===a.getUint16(b+8)}async parse(){this.parseHeader();let{options:a}=this;return a.ifd0.enabled&&await this.parseIfd0Block(),a.exif.enabled&&await this.safeParse("parseExifBlock"),a.gps.enabled&&await this.safeParse("parseGpsBlock"),a.interop.enabled&&await this.safeParse("parseInteropBlock"),a.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(a){let b=this[a]();return void 0!==b.catch&&(b=b.catch(this.handleError)),b}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let a=this.chunk.getUint16(this.ifd0Offset),b=this.ifd0Offset+2+12*a;this.ifd1Offset=this.chunk.getUint32(b)}}parseBlock(a,b){let c=new Map;return this[b]=c,this.parseTags(a,b,c),c}async parseIfd0Block(){if(this.ifd0)return;let{file:a}=this;this.findIfd0Offset(),this.ifd0Offset<8&&A("Malformed EXIF data"),!a.chunked&&this.ifd0Offset>a.byteLength&&A(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${a.byteLength}`),a.tiff&&await a.ensureChunk(this.ifd0Offset,C(this.options));let b=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==b.size?(this.exifOffset=b.get(34665),this.interopOffset=b.get(40965),this.gpsOffset=b.get(34853),this.xmp=b.get(700),this.iptc=b.get(33723),this.icc=b.get(34675),this.options.sanitize&&(b.delete(34665),b.delete(40965),b.delete(34853),b.delete(700),b.delete(33723),b.delete(34675)),b):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,C(this.options));let a=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=a.get(40965)),this.makerNote=a.get(37500),this.userComment=a.get(37510),this.options.sanitize&&(a.delete(40965),a.delete(37500),a.delete(37510)),this.unpack(a,41728),this.unpack(a,41729),a}unpack(a,b){let c=a.get(b);c&&1===c.length&&a.set(b,c[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset))return;let a=this.parseBlock(this.gpsOffset,"gps");return a&&a.has(2)&&a.has(4)&&(a.set("latitude",au(...a.get(2),a.get(1))),a.set("longitude",au(...a.get(4),a.get(3)))),a}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(a=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||a))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let a=this.ifd1.get(513),b=this.ifd1.get(514);return this.chunk.getUint8Array(a,b)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let a,b,c,d={};for(b of $)if(!z(a=this[b]))if(c=this.canTranslate?this.translateBlock(a,b):Object.fromEntries(a),this.options.mergeOutput){if("ifd1"===b)continue;Object.assign(d,c)}else d[b]=c;return this.makerNote&&(d.makerNote=this.makerNote),this.userComment&&(d.userComment=this.userComment),d}assignToOutput(a,b){if(this.globalOptions.mergeOutput)Object.assign(a,b);else for(let[c,d]of Object.entries(b))this.assignObjectToOutput(a,c,d)}}function au(a,b,c,d){var e=a+b/60+c/3600;return"S"!==d&&"W"!==d||(e*=-1),e}w(at,"type","tiff"),w(at,"headerLength",10),K.set("tiff",at);var av=Object.freeze({__proto__:null,default:an,Exifr:al,fileParsers:J,segmentParsers:K,fileReaders:L,tagKeys:U,tagValues:V,tagRevivers:W,createDictionary:S,extendDictionary:T,fetchUrlAsArrayBuffer:P,readBlobAsArrayBuffer:Q,chunkedProps:X,otherSegments:Y,segments:Z,tiffBlocks:$,segmentsAndBlocks:_,tiffExtractables:aa,inheritables:ab,allFormatters:ac,Options:ah,parse:am});let aw={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ax=Object.assign({},aw,{firstChunkSize:4e4,gps:[1,2,3,4]});async function ay(a){let b=new al(ax);await b.read(a);let c=await b.parse();if(c&&c.gps){let{latitude:a,longitude:b}=c.gps;return{latitude:a,longitude:b}}}let az=Object.assign({},aw,{tiff:!1,ifd1:!0,mergeOutput:!1});async function aA(a){let b=new al(az);await b.read(a);let c=await b.extractThumbnail();return c&&s?q.from(c):c}async function aB(a){let b=await this.thumbnail(a);if(void 0!==b){let a=new Blob([b]);return URL.createObjectURL(a)}}let aC=Object.assign({},aw,{firstChunkSize:4e4,ifd0:[274]});async function aD(a){let b=new al(aC);await b.read(a);let c=await b.parse();if(c&&c.ifd0)return c.ifd0[274]}let aE=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),aF=!0,aG=!0;if("object"==typeof navigator){let a=navigator.userAgent;if(a.includes("iPad")||a.includes("iPhone")){let b=a.match(/OS (\d+)_(\d+)/);if(b){let[,a,c]=b;aF=Number(a)+.1*Number(c)<13.4,aG=!1}}else if(a.includes("OS X 10")){let[,b]=a.match(/OS X 10[_.](\d+)/);aF=aG=15>Number(b)}if(a.includes("Chrome/")){let[,b]=a.match(/Chrome\/(\d+)/);aF=aG=81>Number(b)}else if(a.includes("Firefox/")){let[,b]=a.match(/Firefox\/(\d+)/);aF=aG=77>Number(b)}}async function aH(a){let b=await aD(a);return Object.assign({canvas:aF,css:aG},aE[b])}class aI extends G{constructor(...a){super(...a),w(this,"ranges",new aJ),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(a,b,c){if(0===a&&0===this.byteLength&&c){let a=new DataView(c.buffer||c,c.byteOffset,c.byteLength);this._swapDataView(a)}else{let c=a+b;if(c>this.byteLength){let{dataView:a}=this._extend(c);this._swapDataView(a)}}}_extend(a){let b,c=new DataView((b=s?q.allocUnsafe(a):new Uint8Array(a)).buffer,b.byteOffset,b.byteLength);return b.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:b,dataView:c}}subarray(a,b,c=!1){return b=b||this._lengthToEnd(a),c&&this._tryExtend(a,b),this.ranges.add(a,b),super.subarray(a,b)}set(a,b,c=!1){c&&this._tryExtend(b,a.byteLength,a);let d=super.set(a,b);return this.ranges.add(b,d.byteLength),d}async ensureChunk(a,b){this.chunked&&(this.ranges.available(a,b)||await this.readChunk(a,b))}available(a,b){return this.ranges.available(a,b)}}class aJ{constructor(){w(this,"list",[])}get length(){return this.list.length}add(a,b,c=0){let d=a+b,e=this.list.filter(b=>{var c,e,f,g,h,i;return c=a,e=b.offset,f=d,c<=e&&e<=f||(g=a,h=b.end,i=d,g<=h&&h<=i)});if(e.length>0){a=Math.min(a,...e.map(a=>a.offset)),b=(d=Math.max(d,...e.map(a=>a.end)))-a;let c=e.shift();c.offset=a,c.length=b,c.end=d,this.list=this.list.filter(a=>!e.includes(a))}else this.list.push({offset:a,length:b,end:d})}available(a,b){let c=a+b;return this.list.some(b=>b.offset<=a&&c<=b.end)}}class aK extends aI{constructor(a,b){super(0),w(this,"chunksRead",0),this.input=a,this.options=b}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(a=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let b=this.options.chunkSize,c=await this.readChunk(a,b);return!!c&&c.byteLength===b}async readChunk(a,b){if(this.chunksRead++,0!==(b=this.safeWrapAddress(a,b)))return this._readChunk(a,b)}safeWrapAddress(a,b){return void 0!==this.size&&a+b>this.size?Math.max(0,this.size-a):b}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}L.set("blob",class extends aK{async readWhole(){this.chunked=!1;let a=await Q(this.input);this._swapArrayBuffer(a)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(a,b){let c=b?a+b:void 0,d=this.input.slice(a,c),e=await Q(d);return this.set(e,a,!0)}});var aL=Object.freeze({__proto__:null,default:av,Exifr:al,fileParsers:J,segmentParsers:K,fileReaders:L,tagKeys:U,tagValues:V,tagRevivers:W,createDictionary:S,extendDictionary:T,fetchUrlAsArrayBuffer:P,readBlobAsArrayBuffer:Q,chunkedProps:X,otherSegments:Y,segments:Z,tiffBlocks:$,segmentsAndBlocks:_,tiffExtractables:aa,inheritables:ab,allFormatters:ac,Options:ah,parse:am,gpsOnlyOptions:ax,gps:ay,thumbnailOnlyOptions:az,thumbnail:aA,thumbnailUrl:aB,orientationOnlyOptions:aC,orientation:aD,rotations:aE,get rotateCanvas(){return aF},get rotateCss(){return aG},rotation:aH});L.set("url",class extends aK{async readWhole(){this.chunked=!1;let a=await P(this.input);a instanceof ArrayBuffer?this._swapArrayBuffer(a):a instanceof Uint8Array&&this._swapBuffer(a)}async _readChunk(a,b){let c=b?a+b-1:void 0,d=this.options.httpHeaders||{};(a||c)&&(d.range=`bytes=${[a,c].join("-")}`);let e=await v(this.input,{headers:d}),f=await e.arrayBuffer(),g=f.byteLength;if(416!==e.status)return g!==b&&(this.size=a+g),this.set(f,a,!0)}}),G.prototype.getUint64=function(a){let b=this.getUint32(a),c=this.getUint32(a+4);return b<1048575?b<<32|c:(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),r(b)<<r(32)|r(c))};class aM extends ao{parseBoxes(a=0){let b=[];for(;a<this.file.byteLength-4;){let c=this.parseBoxHead(a);if(b.push(c),0===c.length)break;a+=c.length}return b}parseSubBoxes(a){a.boxes=this.parseBoxes(a.start)}findBox(a,b){return void 0===a.boxes&&this.parseSubBoxes(a),a.boxes.find(a=>a.kind===b)}parseBoxHead(a){let b=this.file.getUint32(a),c=this.file.getString(a+4,4),d=a+8;return 1===b&&(b=this.file.getUint64(a+8),d+=8),{offset:a,length:b,kind:c,start:d}}parseBoxFullHead(a){if(void 0!==a.version)return;let b=this.file.getUint32(a.start);a.version=b>>24,a.start+=4}}class aN extends aM{static canHandle(a,b){if(0!==b)return!1;let c=a.getUint16(2);if(c>50)return!1;let d=16,e=[];for(;d<c;)e.push(a.getString(d,4)),d+=4;return e.includes(this.type)}async parse(){let a=this.file.getUint32(0),b=this.parseBoxHead(a);for(;"meta"!==b.kind;)a+=b.length,await this.file.ensureChunk(a,16),b=this.parseBoxHead(a);await this.file.ensureChunk(b.offset,b.length),this.parseBoxFullHead(b),this.parseSubBoxes(b),this.options.icc.enabled&&await this.findIcc(b),this.options.tiff.enabled&&await this.findExif(b)}async registerSegment(a,b,c){await this.file.ensureChunk(b,c);let d=this.file.subarray(b,c);this.createParser(a,d)}async findIcc(a){let b=this.findBox(a,"iprp");if(void 0===b)return;let c=this.findBox(b,"ipco");if(void 0===c)return;let d=this.findBox(c,"colr");void 0!==d&&await this.registerSegment("icc",d.offset+12,d.length)}async findExif(a){let b=this.findBox(a,"iinf");if(void 0===b)return;let c=this.findBox(a,"iloc");if(void 0===c)return;let d=this.findExifLocIdInIinf(b),e=this.findExtentInIloc(c,d);if(void 0===e)return;let[f,g]=e;await this.file.ensureChunk(f,g);let h=4+this.file.getUint32(f);f+=h,g-=h,await this.registerSegment("tiff",f,g)}findExifLocIdInIinf(a){this.parseBoxFullHead(a);let b,c,d,e=a.start,f=this.file.getUint16(e);for(e+=2;f--;){if(b=this.parseBoxHead(e),this.parseBoxFullHead(b),c=b.start,b.version>=2&&(d=3===b.version?4:2,"Exif"===this.file.getString(c+d+2,4)))return this.file.getUintBytes(c,d);e+=b.length}}get8bits(a){let b=this.file.getUint8(a);return[b>>4,15&b]}findExtentInIloc(a,b){this.parseBoxFullHead(a);let c=a.start,[d,e]=this.get8bits(c++),[f,g]=this.get8bits(c++),h=2===a.version?4:2,i=2*(1===a.version||2===a.version),j=g+d+e,k=2===a.version?4:2,l=this.file.getUintBytes(c,k);for(c+=k;l--;){let a=this.file.getUintBytes(c,h);c+=h+i+2+f;let k=this.file.getUint16(c);if(c+=2,a===b)return k>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(c+g,d),this.file.getUintBytes(c+g+d,e)];c+=k*j}}}class aO extends aN{}w(aO,"type","heic");class aP extends aN{}w(aP,"type","avif"),J.set("heic",aO),J.set("avif",aP),S(U,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),S(U,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),S(U,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),S(V,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let aQ=S(V,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),aR={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};aQ.set(37392,aR),aQ.set(41488,aR);let aS={0:"Normal",1:"Low",2:"High"};function aT(a){return"object"==typeof a&&void 0!==a.length?a[0]:a}function aU(a){let b=Array.from(a).slice(1);return b[1]>15&&(b=b.map(a=>String.fromCharCode(a))),"0"!==b[2]&&0!==b[2]||b.pop(),b.join(".")}function aV(a){if("string"==typeof a){var[b,c,d,e,f,g]=a.trim().split(/[-: ]/g).map(Number),h=new Date(b,c-1,d);return Number.isNaN(e)||Number.isNaN(f)||Number.isNaN(g)||(h.setHours(e),h.setMinutes(f),h.setSeconds(g)),Number.isNaN(+h)?a:h}}function aW(a){var b,c;if("string"==typeof a)return a;let d=[];if(0===a[1]&&0===a[a.length-1])for(let c=0;c<a.length;c+=2){d.push((b=a[c+1],b<<8|a[c]))}else for(let b=0;b<a.length;b+=2){d.push((c=a[b],c<<8|a[b+1]))}return B(String.fromCodePoint(...d))}aQ.set(41992,aS),aQ.set(41993,aS),aQ.set(41994,aS),S(W,["ifd0","ifd1"],[[50827,function(a){return"string"!=typeof a?F(a):a}],[306,aV],[40091,aW],[40092,aW],[40093,aW],[40094,aW],[40095,aW]]),S(W,"exif",[[40960,aU],[36864,aU],[36867,aV],[36868,aV],[40962,aT],[40963,aT]]),S(W,"gps",[[0,a=>Array.from(a).join(".")],[7,a=>Array.from(a).join(":")]]);class aX extends ap{static canHandle(a,b){return 225===a.getUint8(b+1)&&0x68747470===a.getUint32(b+4)&&"http://ns.adobe.com/"===a.getString(b+4,20)}static headerLength(a,b){return"http://ns.adobe.com/xmp/extension/"===a.getString(b+4,34)?79:33}static findPosition(a,b){let c=super.findPosition(a,b);return c.multiSegment=c.extended=79===c.headerLength,c.multiSegment?(c.chunkCount=a.getUint8(b+72),c.chunkNumber=a.getUint8(b+76),0!==a.getUint8(b+77)&&c.chunkNumber++):(c.chunkCount=1/0,c.chunkNumber=-1),c}static handleMultiSegments(a){return a.map(a=>a.chunk.getString()).join("")}normalizeInput(a){return"string"==typeof a?a:G.from(a).getString()}parse(a=this.chunk){if(!this.localOptions.parse)return a;a=function(a){let b={},c={};for(let a of a4)b[a]=[],c[a]=0;return a.replace(a5,(a,d,e)=>{if("<"===d){let d=++c[e];return b[e].push(d),`${a}#${d}`}return`${a}#${b[e].pop()}`})}(a);let b=aZ.findAll(a,"rdf","Description");0===b.length&&b.push(new aZ("rdf","Description",void 0,a));let c,d={};for(let a of b)for(let b of a.properties)c=a1(b.ns,d),a$(b,c);for(let a in d)void 0===(d[a]=x(d[a]))&&delete d[a];return x(d)}assignToOutput(a,b){if(this.localOptions.parse)for(let[c,d]of Object.entries(b))switch(c){case"tiff":this.assignObjectToOutput(a,"ifd0",d);break;case"exif":this.assignObjectToOutput(a,"exif",d);break;case"xmlns":break;default:this.assignObjectToOutput(a,c,d)}else a.xmp=b}}w(aX,"type","xmp"),w(aX,"multiSegment",!0),K.set("xmp",aX);class aY{static findAll(a){return a2(a,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(aY.unpackMatch)}static unpackMatch(a){let b=a[1],c=a[2],d=a[3].slice(1,-1);return new aY(b,c,d=a3(d))}constructor(a,b,c){this.ns=a,this.name=b,this.value=c}serialize(){return this.value}}class aZ{static findAll(a,b,c){if(void 0!==b||void 0!==c){b=b||"[\\w\\d-]+",c=c||"[\\w\\d-]+";var d=RegExp(`<(${b}):(${c})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else d=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return a2(a,d).map(aZ.unpackMatch)}static unpackMatch(a){return new aZ(a[1],a[2],a[4],a[8])}constructor(a,b,c,d){this.ns=a,this.name=b,this.attrString=c,this.innerXml=d,this.attrs=aY.findAll(c),this.children=aZ.findAll(d),this.value=0===this.children.length?a3(d):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:a,name:b}=this;return"rdf"===a&&("Seq"===b||"Bag"===b||"Alt"===b)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return a0(this.children.map(a_));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let a={};for(let b of this.properties)a$(b,a);return void 0!==this.value&&(a.value=this.value),x(a)}}function a$(a,b){let c=a.serialize();void 0!==c&&(b[a.name]=c)}var a_=a=>a.serialize(),a0=a=>1===a.length?a[0]:a,a1=(a,b)=>b[a]?b[a]:b[a]={};function a2(a,b){let c,d=[];if(!a)return d;for(;null!==(c=b.exec(a));)d.push(c);return d}function a3(a){if(null==a||"null"===a||"undefined"===a||""===a||""===a.trim())return;let b=Number(a);if(!Number.isNaN(b))return b;let c=a.toLowerCase();return"true"===c||"false"!==c&&a.trim()}let a4=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],a5=RegExp(`(<|\\/)(${a4.join("|")})`,"g");var a6=Object.freeze({__proto__:null,default:aL,Exifr:al,fileParsers:J,segmentParsers:K,fileReaders:L,tagKeys:U,tagValues:V,tagRevivers:W,createDictionary:S,extendDictionary:T,fetchUrlAsArrayBuffer:P,readBlobAsArrayBuffer:Q,chunkedProps:X,otherSegments:Y,segments:Z,tiffBlocks:$,segmentsAndBlocks:_,tiffExtractables:aa,inheritables:ab,allFormatters:ac,Options:ah,parse:am,gpsOnlyOptions:ax,gps:ay,thumbnailOnlyOptions:az,thumbnail:aA,thumbnailUrl:aB,orientationOnlyOptions:aC,orientation:aD,rotations:aE,get rotateCanvas(){return aF},get rotateCss(){return aG},rotation:aH});let a7=u("fs",a=>a.promises);L.set("fs",class extends aK{async readWhole(){this.chunked=!1,this.fs=await a7;let a=await this.fs.readFile(this.input);this._swapBuffer(a)}async readChunked(){this.chunked=!0,this.fs=await a7,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(a,b){void 0===this.fh&&await this.open(),a+b>this.size&&(b=this.size-a);var c=this.subarray(a,b,!0);return await this.fh.read(c.dataView,0,b,a),c}async close(){if(this.fh){let a=this.fh;this.fh=void 0,await a.close()}}}),L.set("base64",class extends aK{constructor(...a){super(...a),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(a,b){let c,d,e=this.input;void 0===a?(a=0,c=0,d=0):(c=4*Math.floor(a/3),d=a-c/4*3),void 0===b&&(b=this.size);let f=c+4*Math.ceil((a+b)/3);e=e.slice(c,f);let g=Math.min(b,this.size-a);if(s){let b=q.from(e,"base64").slice(d,d+g);return this.set(b,a,!0)}{let b=this.subarray(a,g,!0),c=atob(e),f=b.toUint8();for(let a=0;a<g;a++)f[a]=c.charCodeAt(d+a);return b}}});class a8 extends ao{static canHandle(a,b){return 18761===b||19789===b}extendOptions(a){let{ifd0:b,xmp:c,iptc:d,icc:e}=a;c.enabled&&b.deps.add(700),d.enabled&&b.deps.add(33723),e.enabled&&b.deps.add(34675),b.finalizeFilters()}async parse(){let{tiff:a,xmp:b,iptc:c,icc:d}=this.options;if(a.enabled||b.enabled||c.enabled||d.enabled){let a=Math.max(C(this.options),this.options.chunkSize);await this.file.ensureChunk(0,a),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(a){if(this.parsers.tiff[a]){let b=this.parsers.tiff[a];this.injectSegment(a,b)}}}w(a8,"type","tiff"),J.set("tiff",a8);let a9=u("zlib"),ba=["ihdr","iccp","text","itxt","exif"];class bb extends ao{constructor(...a){super(...a),w(this,"catchError",a=>this.errors.push(a)),w(this,"metaChunks",[]),w(this,"unknownChunks",[])}static canHandle(a,b){return 35152===b&&0x89504e47===a.getUint32(0)&&0xd0a1a0a===a.getUint32(4)}async parse(){let{file:a}=this;await this.findPngChunksInRange(8,a.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(a,b){let{file:c}=this;for(;a<b;){let b=c.getUint32(a),d=c.getUint32(a+4),e=c.getString(a+4,4).toLowerCase(),f=b+4+4+4,g={type:e,offset:a,length:f,start:a+4+4,size:b,marker:d};ba.includes(e)?this.metaChunks.push(g):this.unknownChunks.push(g),a+=f}}parseTextChunks(){for(let a of this.metaChunks.filter(a=>"text"===a.type)){let[b,c]=this.file.getString(a.start,a.size).split("\0");this.injectKeyValToIhdr(b,c)}}injectKeyValToIhdr(a,b){let c=this.parsers.ihdr;c&&c.raw.set(a,b)}findIhdr(){let a=this.metaChunks.find(a=>"ihdr"===a.type);a&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",a.chunk)}async findExif(){let a=this.metaChunks.find(a=>"exif"===a.type);a&&this.injectSegment("tiff",a.chunk)}async findXmp(){for(let a of this.metaChunks.filter(a=>"itxt"===a.type))"XML:com.adobe.xmp"===a.chunk.getString(0,17)&&this.injectSegment("xmp",a.chunk)}async findIcc(){let a=this.metaChunks.find(a=>"iccp"===a.type);if(!a)return;let{chunk:b}=a,c=b.getUint8Array(0,81),d=0;for(;d<80&&0!==c[d];)d++;let e=d+2,f=b.getString(0,d);if(this.injectKeyValToIhdr("ProfileName",f),p){let a=await a9,c=b.getUint8Array(e);c=a.inflateSync(c),this.injectSegment("icc",c)}}}w(bb,"type","png"),J.set("png",bb),S(U,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),T(U,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let bc=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];T(U,"ifd0",bc),T(U,"exif",bc),S(V,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class bd extends ap{static canHandle(a,b){return 224===a.getUint8(b+1)&&0x4a464946===a.getUint32(b+4)&&0===a.getUint8(b+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}w(bd,"type","jfif"),w(bd,"headerLength",9),K.set("jfif",bd),S(U,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class be extends ap{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}w(be,"type","ihdr"),K.set("ihdr",be),S(U,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),S(V,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class bf extends ap{static canHandle(a,b){return 226===a.getUint8(b+1)&&0x4943435f===a.getUint32(b+4)}static findPosition(a,b){let c=super.findPosition(a,b);return c.chunkNumber=a.getUint8(b+16),c.chunkCount=a.getUint8(b+17),c.multiSegment=c.chunkCount>1,c}static handleMultiSegments(a){return new G(function(a){let b=a[0].constructor,c=0;for(let b of a)c+=b.length;let d=new b(c),e=0;for(let b of a)d.set(b,e),e+=b.length;return d}(a.map(a=>a.chunk.toUint8())))}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:a}=this;for(let[b,c]of(this.chunk.byteLength<84&&A("ICC header is too short"),Object.entries(bg))){b=parseInt(b,10);let d=c(this.chunk,b);"\0\0\0\0"!==d&&a.set(b,d)}}parseTags(){let a,b,c,d,e,{raw:f}=this,g=this.chunk.getUint32(128),h=132,i=this.chunk.byteLength;for(;g--;){if(a=this.chunk.getString(h,4),b=this.chunk.getUint32(h+4),c=this.chunk.getUint32(h+8),d=this.chunk.getString(b,4),b+c>i)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");void 0!==(e=this.parseTag(d,b,c))&&"\0\0\0\0"!==e&&f.set(a,e),h+=12}}parseTag(a,b,c){switch(a){case"desc":return this.parseDesc(b);case"mluc":return this.parseMluc(b);case"text":return this.parseText(b,c);case"sig ":return this.parseSig(b)}if(!(b+c>this.chunk.byteLength))return this.chunk.getUint8Array(b,c)}parseDesc(a){let b=this.chunk.getUint32(a+8)-1;return B(this.chunk.getString(a+12,b))}parseText(a,b){return B(this.chunk.getString(a+8,b-8))}parseSig(a){return B(this.chunk.getString(a+8,4))}parseMluc(a){let{chunk:b}=this,c=b.getUint32(a+8),d=b.getUint32(a+12),e=a+16,f=[];for(let g=0;g<c;g++){let c=b.getString(e+0,2),g=b.getString(e+2,2),h=b.getUint32(e+4),i=b.getUint32(e+8)+a,j=B(b.getUnicodeString(i,h));f.push({lang:c,country:g,text:j}),e+=d}return 1===c?f[0].text:f}translateValue(a,b){return"string"==typeof a?b[a]||b[a.toLowerCase()]||a:b[a]||a}}w(bf,"type","icc"),w(bf,"multiSegment",!0),w(bf,"headerLength",18);let bg={4:bh,8:function(a,b){return[a.getUint8(b),a.getUint8(b+1)>>4,a.getUint8(b+1)%16].map(a=>a.toString(10)).join(".")},12:bh,16:bh,20:bh,24:function(a,b){let c=a.getUint16(b),d=a.getUint16(b+2)-1,e=a.getUint16(b+4),f=a.getUint16(b+6);return new Date(Date.UTC(c,d,e,f,a.getUint16(b+8),a.getUint16(b+10)))},36:bh,40:bh,48:bh,52:bh,64:(a,b)=>a.getUint32(b),80:bh};function bh(a,b){return B(a.getString(b,4))}K.set("icc",bf),S(U,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);let bi={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},bj={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};S(V,"icc",[[4,bi],[12,bj],[40,Object.assign({},bi,bj)],[48,bi],[80,bi],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class bk extends ap{static canHandle(a,b,c){return 237===a.getUint8(b+1)&&"Photoshop"===a.getString(b+4,9)&&void 0!==this.containsIptc8bim(a,b,c)}static headerLength(a,b,c){let d,e=this.containsIptc8bim(a,b,c);if(void 0!==e)return(d=a.getUint8(b+e+7))%2!=0&&(d+=1),0===d&&(d=4),e+8+d}static containsIptc8bim(a,b,c){for(let d=0;d<c;d++)if(this.isIptcSegmentHead(a,b+d))return d}static isIptcSegmentHead(a,b){return 56===a.getUint8(b)&&0x3842494d===a.getUint32(b)&&1028===a.getUint16(b+4)}parse(){let{raw:a}=this,b=this.chunk.byteLength-1,c=!1;for(let d=0;d<b;d++)if(28===this.chunk.getUint8(d)&&2===this.chunk.getUint8(d+1)){c=!0;let b=this.chunk.getUint16(d+3),e=this.chunk.getUint8(d+2),f=this.chunk.getLatin1String(d+5,b);a.set(e,this.pluralizeValue(a.get(e),f)),d+=4+b}else if(c)break;return this.translate(),this.output}pluralizeValue(a,b){return void 0!==a?a instanceof Array?(a.push(b),a):[a,b]:b}}async function bl(a){return new Promise((b,c)=>{let d=new Image;d.onload=()=>b(d),d.onerror=c,d.src=URL.createObjectURL(a)})}async function bm(a){try{let b=await a6.parse(a,{tiff:!0,xmp:!0,icc:!1,iptc:!1,jfif:!1,ihdr:!1,translateKeys:!1,translateValues:!1,reviveValues:!1,sanitize:!1,mergeOutput:!1});if(!b)return!0;let c=b.Software?.toLowerCase()||"",d=b.UserComment?.toLowerCase()||"",e=b.ImageDescription?.toLowerCase()||"";for(let a of["gemini","imagen","dalle","midjourney","stable diffusion"])if(c.includes(a)||d.includes(a)||e.includes(a))return!1;return!0}catch(a){return console.warn("EXIF parsing failed:",a),!0}}async function bn(a,b,c="image/png",d=.95){return new Promise((e,f)=>{a.toBlob(a=>{if(!a)return void f(Error("Failed to create blob from canvas"));let c=URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=b,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),e()},c,d)})}function bo(){let{isLoading:a,imageQueue:b,currentIndex:c,batchState:f,batchProgress:m,processFiles:n,removeWatermark:o,processBatch:p,cancelBatch:q,downloadImage:r,downloadAll:s,reset:t,setCurrentIndex:u}=function(){let[a,b]=(0,e.useState)(null),[c,d]=(0,e.useState)(!0),[f,g]=(0,e.useState)([]),[h,i]=(0,e.useState)(0),[j,k]=(0,e.useState)("idle"),[l,m]=(0,e.useState)({total:0,processed:0,success:0,failed:0,pending:0,percentage:0}),n=(0,e.useRef)(new Map),o=(0,e.useRef)(!1),p=(0,e.useCallback)(()=>{g(a=>{let b=a.length,c=a.filter(a=>"success"===a.status).length,d=a.filter(a=>"failed"===a.status).length;a.filter(a=>"processing"===a.status).length;let e=a.filter(a=>"pending"===a.status).length,f=c+d,g=b>0?Math.round(f/b*100):0;return m({total:b,processed:f,success:c,failed:d,pending:e,percentage:g}),a})},[]),q=(0,e.useCallback)(async b=>{if(a){d(!0);try{let c=Array.from(b),d=[];for(let b=0;b<c.length;b++){let e=c[b];if(!e.type.startsWith("image/")){console.warn(`Skipping non-image file: ${e.name}`);continue}let f=await bl(e),g=await bm(e),h=a.getWatermarkInfo(f.width,f.height),i=URL.createObjectURL(e);d.push({id:Date.now()+b,file:e,name:e.name,originalImage:f,originalImg:f,originalUrl:i,processedCanvas:null,processedUrl:null,processedBlob:null,status:"pending",isOriginal:g,watermarkInfo:h})}let e=f.length;g(a=>[...a,...d]),setTimeout(p,0);for(let a=0;a<d.length;a++){let b=e+a;await r(b,d[a]),p()}}catch(a){console.error("Error processing files:",a)}finally{d(!1)}}},[a,f.length,p]),r=(0,e.useCallback)(async(b,c)=>{if(a){g(a=>{let c=[...a];return c[b]&&(c[b]={...c[b],status:"processing"}),c});try{let d=await a.removeWatermarkFromImage(c.originalImage);n.current.set(b,d);let e=await new Promise((a,b)=>{d.toBlob(c=>{c?a(c):b(Error("Failed to create blob"))},"image/png")}),f=URL.createObjectURL(e);g(a=>{let c=[...a];return c[b]&&(c[b]={...c[b],processedCanvas:d,processedUrl:f,processedBlob:e,status:"success"}),c})}catch(a){console.error("Error removing watermark:",a),g(a=>{let c=[...a];return c[b]&&(c[b]={...c[b],status:"failed"}),c})}}},[a]),s=(0,e.useCallback)(async b=>{if(!a||b<0||b>=f.length)return;let c=f[b];"processing"!==c.status&&"success"!==c.status&&await r(b,c)},[a,f,r]),t=(0,e.useCallback)(a=>{if(a<0||a>=f.length)return;let b=f[a];if(!b.processedCanvas)return;let c=b.file.name,d={"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/webp":"webp","image/gif":"gif","image/bmp":"bmp"}[b.file.type]||"png",e=c.replace(/\.[^.]+$/,""),g=`${e}_no_watermark.${d}`;bn(b.processedCanvas,g,b.file.type)},[f]),u=(0,e.useCallback)(()=>{f.forEach((a,b)=>{a.processedCanvas&&t(b)})},[f,t]),v=(0,e.useCallback)(async()=>{if(a&&"processing"!==j){o.current=!1,k("processing");try{for(let{item:a,index:b}of f.map((a,b)=>({item:a,index:b})).filter(({item:a})=>"pending"===a.status||"failed"===a.status)){if(o.current){k("cancelled");break}await r(b,a),p()}o.current||k("complete")}catch(a){console.error("Batch processing error:",a),k("idle")}}},[a,j,f,r,p]),w=(0,e.useCallback)(()=>{o.current=!0,k("cancelled")},[]),x=(0,e.useCallback)(()=>{o.current=!0,f.forEach(a=>{a.originalUrl&&URL.revokeObjectURL(a.originalUrl),a.processedUrl&&URL.revokeObjectURL(a.processedUrl)}),n.current.clear(),g([]),i(0),k("idle"),m({total:0,processed:0,success:0,failed:0,pending:0,percentage:0})},[f]);return{engine:a,isLoading:c,imageQueue:f,currentIndex:h,batchState:j,batchProgress:l,processFiles:q,removeWatermark:s,processBatch:v,cancelBatch:w,downloadImage:t,downloadAll:u,reset:x,setCurrentIndex:i}}(),[v,w]=(0,e.useState)(g.t("main.title")),[x,y]=(0,e.useState)(g.t("main.subtitle")),z=async a=>{await n(a)},A=async a=>{await o(a)},B=b[c],C=b.some(a=>a.processedUrl);return(0,d.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,d.jsx)(h,{}),(0,d.jsxs)("main",{className:"flex-grow container mx-auto px-4 pt-28 pb-12",children:[(0,d.jsxs)("div",{className:"text-center mb-12",children:[(0,d.jsxs)("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full glass-light mb-6 animate-float",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,d.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"100% Free & Private"})]}),(0,d.jsx)("h2",{className:"text-5xl md:text-7xl font-black mb-6",children:(0,d.jsx)("span",{className:"gradient-text",children:v})}),(0,d.jsx)("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto leading-relaxed",children:x})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-16",children:[(0,d.jsx)("div",{className:"group glass rounded-xl p-5 card-hover",children:(0,d.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-blue-500 rounded-xl blur-lg opacity-50 group-hover:opacity-75 transition-opacity"}),(0,d.jsx)("div",{className:"relative w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-1 text-white group-hover:text-blue-400 transition-colors",children:g.t("feature.speed.title")}),(0,d.jsx)("p",{className:"text-sm text-gray-400 leading-snug",children:g.t("feature.speed.desc")})]})]})}),(0,d.jsx)("div",{className:"group glass rounded-xl p-5 card-hover",children:(0,d.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-green-500 rounded-xl blur-lg opacity-50 group-hover:opacity-75 transition-opacity"}),(0,d.jsx)("div",{className:"relative w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-1 text-white group-hover:text-green-400 transition-colors",children:g.t("feature.privacy.title")}),(0,d.jsx)("p",{className:"text-sm text-gray-400 leading-snug",children:g.t("feature.privacy.desc")})]})]})}),(0,d.jsx)("div",{className:"group glass rounded-xl p-5 card-hover",children:(0,d.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-purple-500 rounded-xl blur-lg opacity-50 group-hover:opacity-75 transition-opacity"}),(0,d.jsx)("div",{className:"relative w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-1 text-white group-hover:text-purple-400 transition-colors",children:g.t("feature.free.title")}),(0,d.jsx)("p",{className:"text-sm text-gray-400 leading-snug",children:g.t("feature.free.desc")})]})]})})]}),a&&0===b.length?(0,d.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("svg",{className:"animate-spin h-12 w-12 mx-auto mb-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,d.jsx)("p",{className:"text-gray-400",children:g.t("status.loading")})]})}):0===b.length?(0,d.jsx)(j,{onFilesSelected:z,disabled:a}):(0,d.jsxs)("div",{children:[b.length>1&&(0,d.jsx)(l,{state:f,progress:m,onCancel:q}),b.length>1&&(0,d.jsx)("div",{className:"mb-4 flex items-center space-x-3 overflow-x-auto pb-3",children:b.map((a,b)=>(0,d.jsxs)("button",{onClick:()=>u(b),className:`
                      relative flex-shrink-0 w-24 h-24 rounded-lg overflow-hidden
                      border-2 transition-all
                      ${b===c?"border-blue-500 shadow-lg":"border-gray-700 hover:border-blue-500"}
                    `,children:[(0,d.jsx)("img",{src:a.originalUrl||"",alt:`Thumbnail ${b+1}`,className:"w-full h-full object-cover"}),"processing"===a.status&&(0,d.jsx)("div",{className:"absolute inset-0 bg-blue-500/30 flex items-center justify-center",children:(0,d.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),"success"===a.status&&(0,d.jsx)("div",{className:"absolute top-1 right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"failed"===a.status&&(0,d.jsx)("div",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 rounded-full border-2 border-white flex items-center justify-center",children:(0,d.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),"pending"===a.status&&(0,d.jsx)("div",{className:"absolute top-1 right-1 w-5 h-5 bg-yellow-500 rounded-full border-2 border-white"})]},b))}),B&&(0,d.jsx)(k,{item:B,onRemoveWatermark:()=>A(c),onDownload:()=>{r(c)}}),(0,d.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,d.jsx)("button",{onClick:()=>{t()},className:"group px-8 py-4 glass-light hover:scale-105 text-white font-semibold rounded-xl transition-all duration-300 btn-shine border-2 border-gray-600 hover:border-gray-500",children:g.t("btn.reset")}),(m.pending>0||m.failed>0)&&(0,d.jsx)("button",{onClick:p,disabled:"processing"===f,className:"group relative px-8 py-4 bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 hover:from-green-500 hover:via-emerald-500 hover:to-teal-500 text-white font-bold rounded-xl transition-all duration-300 shadow-2xl shadow-green-500/50 hover:shadow-green-500/75 hover:scale-105 btn-shine disabled:opacity-50 disabled:cursor-not-allowed",children:(0,d.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,d.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{children:g.t("btn.removeAll")})]})}),C&&(0,d.jsx)("button",{onClick:()=>{s()},className:"group relative px-8 py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:from-blue-500 hover:via-purple-500 hover:to-pink-500 text-white font-bold rounded-xl transition-all duration-300 shadow-2xl shadow-purple-500/50 hover:shadow-purple-500/75 hover:scale-105 btn-shine",children:g.t("btn.downloadAll")})]})]})]}),(0,d.jsx)(i,{})]})}w(bk,"type","iptc"),w(bk,"translateValues",!1),w(bk,"reviveValues",!1),K.set("iptc",bk),S(U,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),S(V,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]])},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6622:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1170,23)),Promise.resolve().then(c.t.bind(c,3597,23)),Promise.resolve().then(c.t.bind(c,6893,23)),Promise.resolve().then(c.t.bind(c,9748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,9576,23)),Promise.resolve().then(c.t.bind(c,3041,23)),Promise.resolve().then(c.t.bind(c,1384,23))},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},7143:()=>{},8354:a=>{"use strict";a.exports=require("util")},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9670:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,4160,23)),Promise.resolve().then(c.t.bind(c,1603,23)),Promise.resolve().then(c.t.bind(c,8495,23)),Promise.resolve().then(c.t.bind(c,5170,23)),Promise.resolve().then(c.t.bind(c,7526,23)),Promise.resolve().then(c.t.bind(c,8922,23)),Promise.resolve().then(c.t.bind(c,9234,23)),Promise.resolve().then(c.t.bind(c,2263,23)),Promise.resolve().then(c.bind(c,2146))},9747:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(7954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\dev\\\\removegemini\\\\src\\\\components\\\\WatermarkRemover.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\dev\\removegemini\\src\\components\\WatermarkRemover.tsx","default")},9902:a=>{"use strict";a.exports=require("path")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[100],()=>b(b.s=2638));module.exports=c})();